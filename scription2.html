<!doctype html>
<html>
<head>
  <title>scription</title>
  <meta charset=utf-8>
</head>

<style>

body { 
  margin: 0;
  padding: 0;
  display:flex;
}

textarea { 
  height: 100vw;
  width: 100vw;
  font-size: 1.5em;
  border: none;
  padding: .5em;
  min-height: 300px;
}

.editing { 
  background:black;
  color:green;
  font-family: monospace;
}

</style>

<body>


<textarea spellcheck=false id=scription></textarea>

<script src=js/scription.js></script>
<script>
var box = document.querySelector('#scription'),
    scription = new Scription();  

box.addEventListener('keyup', function(ev){
  if(ev.which == 27){  
    box.classList.toggle('editing'); 
    if( box.classList.contains('editing')) { 
      box.dataset.text = box.value;  
      var data = scription.parse(box.dataset.text);
      box.value = JSON.stringify(data, null, 2);
    } else { 
      box.value = box.dataset.text
    }
  }
})

</script>

</body>
</html>
